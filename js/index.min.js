function getUserData(){var e=JSON.parse(localStorage.getItem("user"));e?(e="Welcome, "+e.fullname+"!",$("#login-btn").hide(),$("#welcome-msg").html(e)):($("#login").show(),$("#logout").hide())}function getAllMovies(){let s=[];for(let l=1;l<=5;l++)$.ajax("http://www.omdbapi.com/?apikey=7c3e8abb&s=all&type=movie&page="+l,{success:function(e){if(s=s.concat(e.Search),5===l){for(let e=s.length-1;0<e;e--){var t=Math.floor(Math.random()*(e+1));[s[e],s[t]]=[s[t],s[e]]}e=s.slice(0,50);let l="";$.each(e,function(e,t){l+=`
                <div class="lg:w-1/4 md:w-1/2 p-4 w-full">
                  <a class="block relative rounded overflow-hidden" onclick="movieSelected('${t.imdbID}')">
                    <img
                      alt="ecommerce"
                      class="object-cover w-full h-[500px] block cursor-pointer"
                      src="${t.Poster}"
                    />
                  </a>
                  <div class="mt-4">
                    <h3 class="text-gray-500 text-xs tracking-widest title-font mb-1">
                      ${t.Type}
                    </h3>
                    <h2 class="text-gray-100 title-font text-lg font-medium">
                    ${t.Title}
                    </h2>
                    <p class="mt-1 text-gray-400">${t.Year}</p>
                  </div>
                </div>
              `}),$("#allMovies").html(l)}}})}function getMovies(e){$.get("http://www.omdbapi.com/?apikey=7c3e8abb&s="+e,function(e,t,l){console.log(e);e=e.Search;let s="";$.each(e,(e,t)=>{s+=`
          <div class="lg:w-1/4 md:w-1/2 p-4 w-full">
            <a class="block relative rounded overflow-hidden" onclick="movieSelected('${t.imdbID}')">
              <img
                alt="ecommerce"
                class="object-cover w-full h-[500px] block cursor-pointer"
                src="${t.Poster}"
              />
            </a>
            <div class="mt-4">
              <h3 class="text-gray-500 text-xs tracking-widest title-font mb-1">
                ${t.Type}
              </h3>
              <h2 class="text-gray-100 title-font text-lg font-medium">
              ${t.Title}
              </h2>
              <p class="mt-1 text-gray-400">${t.Year}</p>
            </div>
          </div>
          `}),$("#movies").html(s)})}function navigateToPage(e){window.location=e+".html"}function getMovie(){var e=sessionStorage.getItem("movieId");$.ajax("http://www.omdbapi.com/?apikey=7c3e8abb&i="+e,{success:function(e,t,l){console.log(e),e=`
          <div class="container px-5 py-24 mx-auto flex flex-wrap">
          <div class="lg:w-1/3 mb-10 lg:mb-0 rounded-lg overflow-hidden">
            <img
              alt="feature"
              class="object-cover h-[70vh] w-[200px]"
              src="${e.Poster}"
            />
          </div>
          <div
            class="flex flex-col flex-wrap lg:py-6 -mb-10 lg:w-1/2 lg:pl-12 lg:text-left text-center"
          >
            <div class="flex flex-col mb-10 lg:items-start items-center">
            <span class="inline-block py-1 px-2 mb-2 rounded bg-gray-800 text-gray-400 text-opacity-75 text-xs font-medium tracking-widest">${e.Type}</span>
            <h1 class="sm:text-3xl text-2xl font-medium mb-4 text-gray-200">${e.Title}</h1>
            <ul class="block">
            <li class="mb-2"><strong class="text-green-600">Rated:</strong> ${e.Rated}</li>
            <li class="mb-2"><strong class="text-green-600">Genre:</strong> ${e.Genre}</li>
            <li class="mb-2"><strong class="text-green-600">Released:</strong> ${e.Released}</li>
            <li class="mb-2"><strong class="text-green-600">IMDB Rating:</strong> ${e.imdbRating}</li>
            <li class="mb-2"><strong class="text-green-600">Director:</strong> ${e.Director}</li>
            <li class="mb-2"><strong class="text-green-600">Writer:</strong> ${e.Writer}</li>
            <li class="mb-2"><strong class="text-green-600">Actors:</strong> ${e.Actors}</li>
            </ul>
  
            <div class="mt-3 rounded-lg">
                <h2 class="text-white text-2xl mb-2">Plot</h2>
                <p class="leading-relaxed text-base">${e.Plot}</p>
            </div>
            <div class="flex mt-8">
              <button class="flex ml-auto text-white bg-green-500 border-0 py-2 px-6 focus:outline-none hover:bg-green-600 rounded"><a href="http://imdb.com/title/${e.imdbID}" target="_blank" class="btn btn-primary">View IMDB</a></button>
              <button id="like" class="rounded-full w-10 h-10 bg-gray-800 p-0 border-0 inline-flex items-center justify-center text-gray-500 ml-4">
                <svg fill="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" class="w-5 h-5" viewBox="0 0 24 24">
                  <path d="M20.84 4.61a5.5 5.5 0 00-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 00-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 000-7.78z"></path>
                </svg>
              </button>
          </div>
            </div>
          </div>
        </div>
        `;$("#movie").html(e)},error:function(e,t,l){console.log(l)}})}$(document).ready(()=>{getAllMovies(),$("#header").load("header.html",()=>{getUserData()}),$("#footer").load("footer.html"),$("#swiper").load("slider.html"),$("#searchForm").on("submit",e=>{getMovies($("#searchText").val()),e.preventDefault()})});